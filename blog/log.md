	Mysql 日志系统

	mysql的日志只要有慢查询日志、错误日志、查询日志、事务日志、二进制日志，redo log 是 InnoDB 存储引擎层的日志，binlog 是 Server 层记录的日志， 两者都是记录了某些操作的日志。


	物理日志和逻辑日志：

	物理日志：通俗的讲，就是只有” 我” 自己可以使用，别人无法共享我的” 物理格式，私有化。

	逻辑日志：可以给别的引擎使用，是所有引擎共享的。

	redo log 日志模块#


	基本概念

	redo log 是 InnoDB 存储引擎层的日志，又称重做日志文件，用于记录事务操作的变化，记录的是数据修改之后的值，不管事务是否提交都会记录下来。而这种先写日志，后写磁盘的技术就是 mysql 里面经常提及到的 WAL(Write Ahead Logging) 技术。
	记录方式
	由于 redo log 记录的是数据页的变更，而这种记录是没有必要永久保存的，因此 redolog 实现上采用来大小固定，循环写入的方式，当记录写到末尾时，又会从头开始写。
	使用场景
	用于系统奔溃恢复 (crash-safe)

	undo 日志模块#

	基本概念
	undo log 是回滚日志，是记录每条数据的所有版本，比如 update 语句，那么它首先会将该条记录的数据记录到 undo log 日志中，并且将最新版本的 roll_pointer 指针指向上一个版本，这样就可以形成当前记录的所有版本，这也是 MVCC 的实现机制。
	使用场景

	MVCC 多版本控制

	binlog 日志模块#

	基本概念
	binlog 又称为归档日志，属于逻辑日志，并且由 mysql 数据库的 service 层执行，是所有存储引擎共享的日志模块，它用于记录数据库执行的写入性操作，也就是在事务 commit 阶段进行记录，以二进制的形式保存于磁盘中。
	记录方式
	binlog 是以追加的方式进行写入的，可以通过 max_binlog_size 参数设置 binlog 文件大小，当文件大小达到某个值时，会生成新的文件来保存日志。
	binlog 是以二进制的形式记录的是这个语句的原始逻辑，依靠 binlog 是没有 crash-safe 能力的。
	刷盘机制
	对于 InnoDB 引擎而言，在每次事务 commit 提交时才会记录 binlog 日志，此时记录仍然在内存中，那么什么时候存储到磁盘中呢？mysql 通过 sync_binlog 参数控制 binlog 刷盘时机，取值范围：0～N：

	0：不去强求，由系统自行判断何时写入磁盘；
	1：每次事务 commit 的时候都要将 binlog 写入磁盘；（建议设置为 1，保证异常重启之后日志不会丢失。）
	N：每 N 个事务 commit ，才会将 binlog 写入磁盘；

	使用场景

	主从复制：在 master 端开启 binlog，然后将 binlog 发送给各个 slaver 端，slaver 端读取 binlog 日志，从而使得主从数据库中数据一致。数据恢复：通过 binlog 获取想要恢复的时间段数据。
